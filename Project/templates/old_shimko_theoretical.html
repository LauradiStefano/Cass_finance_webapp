<html>
<head>
    <!--PY COMPONENTS -->
    <link rel="stylesheet" href="http://cdn.pydata.org/bokeh/release/bokeh-1.1.0.min.css" type="text/css" />
    <script type="text/javascript" src="http://cdn.pydata.org/bokeh/release/bokeh-1.1.0.min.js">
    </script>
    <script type="text/javascript">
        Bokeh.set_log_level("info"); </script>

    <script type="text/x-mathjax-config">
        MathJax.Hub.Config({
        TeX: {
        equationNumbers: {  autoNumber: "AMS"  },
        extensions: ["AMSmath.js", "AMSsymbols.js", "autobold.js", "color.js"]
        }
        }); </script>
    <script type="text/javascript"
            src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
    </script>

    <!--STYLE-->
    <link rel="stylesheet" href="https://meyerweb.com/eric/tools/css/reset/reset.css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.5.1/animate.min.css">
    <link href="/static/basic.css" rel="stylesheet">
    
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Shimko bounds of probability</title>
</head>

<body>

    <!-- NAVBAR -->
    <header>
        <nav class="navbar navbar-expand-lg navbar-dark">
            <a class="navbar-brand" href="#">Finance Web App</a>
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarText" aria-controls="navbarText" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarText">
                <ul class="navbar-nav mr-auto">
                    <li class="nav-item active px-3">
                        <a class="nav-link" href="#">Home <span class="sr-only">(current)</span></a>
                    </li>
                    <li class="nav-item dropdown px-3">
                        <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                            Shimko
                        </a>
                        <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                            <a class="dropdown-item" href="#">parte3_val</a>
                            <a class="dropdown-item" href="#">parte2_upload</a>
                    </li>
                    <li class="nav-item dropdown px-3">
                        <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                            COS_Method
                        </a>
                        <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                            <a class="dropdown-item" href="#">Heston_Process</a>
                            <a class="dropdown-item" href="#">Levy_Process</a>
                    </li>
                    <li class="nav-item px-3">
                        <a class="nav-link" href="#">Asian Option</a>
                    </li>
                </ul>
                <div class="dropdown-divider"></div>

                <span class="navbar-text px-3">

                    <a href="/">Back to index</a>

                </span>
            </div>
        </nav>
    </header>

    <div class="container">
        <div class="row">
            <div class="col p-3 m-4">
                <h1 class="title text-center text-light">Previous simulation</h1>
                <h2 class="lead text-center text-light animated fadeInDown">Shimko Bounds of probability</h2>
            </div>
        </div>
    </div>

    {% if data %}
    {% for result in data %}
    <div class="container">
        <div class="row d-flex justify-content-center">
            <form id="previous" method="post" action=/delete/{{result['id']}}>
                <div class="row mb-4">
                    <div class="col-md-3 col-12">

                        <div class="row">
                            <div class="col-12">
                                <fieldset class="shadow-sm p-3 bg-white rounded animated fadeInLeft custom-overlay">

                                    <div class="row border-bottom mb-2 pb-1">
                                        <legend>Input</legend>
                                    </div>
                                    <div class="row">
                                        <div class="col-12 font-weight-bold d-flex flex-column">

                                            <span class="mb-1">
                                                {{result['form'].strike_min.label}}
                                                {{result['form'].strike_min.data}}
                                            </span>
                                            <span class="mb-1">

                                                {{result['form'].strike_atm.label}}
                                                {{result['form'].strike_atm.data}}
                                            </span>

                                            <span class="mb-1">

                                                {{result['form'].strike_max.label}}
                                                {{result['form'].strike_max.data}}
                                            </span>

                                            <span class="mb-1">

                                                {{result['form'].volatility_min.label}} \((\%) \)
                                                {{result['form'].volatility_min.data}}
                                            </span>

                                            <span class="mb-1">

                                                {{result['form'].volatility_atm.label}} \((\%) \)
                                                {{result['form'].volatility_atm.data}}
                                            </span>

                                            <span class="mb-1">

                                                {{result['form'].volatility_max.label}} \((\%) \)
                                                {{result['form'].volatility_max.data}}
                                            </span>

                                            <span class="mb-1">

                                                {{result['form'].price.label}}
                                                {{result['form'].price.data}}
                                            </span>

                                            <span class="mb-1">

                                                {{result['form'].risk_free.label}}  \((\%) \)
                                                {{result['form'].risk_free.data}}
                                            </span>

                                            <span class="mb-1">

                                                {{result['form'].div_yield.label}}  \((\%) \)
                                                {{result['form'].div_yield.data}}
                                            </span>

                                            <span class="mb-1">

                                                {{result['form'].time.label}}
                                                {{result['form'].time.data}}
                                            </span>


                                        </div>
                                    </div>
                                </fieldset>
                            </div>


                            <div class="col-12">
                                <fieldset class="shadow-sm p-3 bg-white rounded animated fadeInLeft custom-overlay">

                                    <div class="row">
                                        <div class="col-12">

                                            <div class="row border-bottom mb-2 pb-1">
                                                <legend>Results</legend>
                                            </div>
                                            <div class="row">
                                                <div class="col-12">
                                                    {% if result[' plot_return_distribution'] !=None %}
                                                    <div class="row d-flex flex-column">
                                                        <span class="mb-1"> \(a_{0}\): {{result ['a0']}}</span>
                                                        <span class="mb-1"> \(a_{1}\): {{result ['a1']}}</span>
                                                        <span class="mb-1"> \(a_{2}\): {{result ['a2']}}</span>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </fieldset>

                            </div>
                        </div>
                    </div>
                    <div class="col-md-9 col-12">
                        <div class="row">
                            <div class="col-12">
                                <fieldset class="shadow-sm p-3 bg-white rounded animated fadeInRight custom-overlay">

                                    <div class="row border-bottom mb-2 pb-1">
                                        <legend>Table of Moments</legend>
                                    </div>
                                    <div class="row">
                                        <div class="col-12">
                                            <table class="table table-striped">
                                                <thead class="thead-light">
                                                <th scope="col"> Description</th>
                                                <th scope="col"> Ceq</th>
                                                <th scope="col"> LogNormal</th>
                                                <th scope="col"> Ceq Return</th>
                                                <th scope="col"> Normal</th>
                                                </thead>
                                                <tbody>
                                                    <tr>
                                                        <td> Area</td>
                                                        <td> {{result['area_prices']}}</td>
                                                        <td> 1</td>
                                                        <td> {{result['area_returns']}}</td>
                                                        <td> 1</td>
                                                    </tr>
                                                    <tr>
                                                        <td> Mean</td>
                                                        <td> {{result['expected_price']}}</td>
                                                        <td> {{result['expected_price']}}</td>
                                                        <td> {{result['m1_returns']}}</td>
                                                        <td> {{result['m1_returns']}}</td>
                                                    </tr>
                                                    <tr>
                                                        <td> Variance</td>
                                                        <td> {{result['sigma2_price']}}</td>
                                                        <td> {{result['sigma2_price']}}</td>
                                                        <td> {{result['m2_returns']}}</td>
                                                        <td> {{result['m2_returns']}}</td>
                                                    </tr>
                                                    <tr>
                                                        <td> Skewness</td>
                                                        <td> {{result['skewness_prices']}}</td>
                                                        <td> {{result['skewness_prices_log_n']}}</td>
                                                        <td> {{result['skewness_log_returns']}}</td>
                                                        <td> {{result['skewness_normal']}}</td>
                                                    </tr>
                                                    <tr>
                                                        <td> Kurtosis</td>
                                                        <td> {{result['kurtosis_prices']}}</td>
                                                        <td> {{result['kurtosis_prices_log_n']}}</td>
                                                        <td> {{result['kurtosis_log_returns']}}</td>
                                                        <td> {{result['kurtosis_normal']}}</td>
                                                    </tr>
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                </fieldset>
                            </div>

                            <div class="col-12">
                                <fieldset class="shadow-sm p-3 bg-white rounded animated fadeInUp custom-overlay">
                                    <div class="row border-bottom mb-2 pb-1">
                                        <legend>Kolmogorov Smirnov Test</legend>
                                    </div>
                                    <div class="row">
                                        <div class="col-12">
                                            <table class="table table-striped">
                                                <thead class="thead-light">
                                                <th scope="col"></th>
                                                <th scope="col"> Cdf Prices</th>
                                                <th scope="col"> Cdf Returns</th>
                                                </thead>

                                                <tbody>
                                                    <tr>
                                                        <td> Statistic Value</td>
                                                        <td> {{result['statistic_prices']}}</td>
                                                        <td> {{result['statistic_returns']}}</td>

                                                    </tr>
                                                    <tr>
                                                        <td> PValue</td>
                                                        <td> {{result['pvalue_prices']}}</td>
                                                        <td> {{result['pvalue_returns']}}</td>

                                                    </tr>
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                </fieldset>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="row d-flex justify-content-center">

                    <div class="col-12">
                        <div id="plot_return_distribution" class="shadow-sm p-3 mb-3 bg-white rounded d-flex justify-content-center">
                            {{ result['plot_return_distribution'][0]|safe}}
                            {{ result['plot_return_distribution'][1]|safe}}
                        </div>

                        {% if result['plot_index_distribution'] != None %}
                        <div id="plot_index_distribution" class="shadow-sm p-3 mb-3 bg-white rounded d-flex justify-content-center">
                            {{ result['plot_index_distribution'][0]|safe }}
                            {{ result['plot_index_distribution'][1]|safe }}
                        </div>
                        {% endif %}

                        {% if result['plot_index_cdf'] != None %}
                        <div id="plot_index_cdf" class="shadow-sm p-3 mb-3 bg-white rounded d-flex justify-content-center">
                            {{ result['plot_index_cdf'][0]|safe}}
                            {{ result['plot_index_cdf'][1]|safe}}
                        </div>
                        {% endif %}

                        {% if result['plot_return_cdf'] != None %}
                        <div id="plot_return_cdf" class="shadow-sm p-3 mb-3 bg-white rounded d-flex justify-content-center">
                            {{ result['plot_return_cdf'][0]|safe}}
                            {{ result['plot_return_cdf'][1]|safe}}
                        </div>
                        {% endif %}

                        {% endif %}
                    </div>
                </div>
                <div class="row">
                    <div class="col-12 d-flex mb-3 justify-content-center">
                        <form class="" method="POST" action="/delete/{{ result.id }}">
                            <input type="submit" value="Delete"
                                   title="Delete this post from database">
                        </form>
                    </div>
                </div>
            </form>
        </div>
    </div>
    {% endfor %}
    <hr>
    <center>
        <form method="POST" action="/delete/-1">
            <input type="submit" value="Delete all">
        </form>
    </center>
    {% else %}
    No previous simulations
    {% endif %}


    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.0/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/vast-engineering/jquery-popup-overlay@2/jquery.popupoverlay.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>
    <script type="text/javascript">$('#popup_table').popup();</script>
    <script type="text/javascript" src="./static/tableExportExcel.js"></script>
</body>
</html>
