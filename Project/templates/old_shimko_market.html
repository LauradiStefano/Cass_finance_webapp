{% include 'header.html' %}

<div class="container">
    <div class="row">
        <div class="col p-3 m-4">
            <h1 class="title text-center text-light">Previous simulation</h1>
            <h2 class="lead text-center text-light animated fadeInDown">Shimko Bounds of probability</h2>
        </div>
    </div>
</div>

{% if data %}
{% for result in data %}
<hr> <!--hr is a line-->
<div class="container">

    <div class="row">
        <div class="col-md-3 col-12">
            <div class="row">
                <div class="col-12 output">
                    <fieldset class="shadow-sm p-3 bg-white rounded animated fadeInLeft custom-overlay">
                        <div class="row border-bottom mb-2 pb-1">
                            <legend>Input</legend>
                        </div>
                        <div class="row">

                            <!--\((\%) \) is a Mathjax symbol for % -->

                            <div class="col d-flex flex-column">
                                {{result['form'].price.label}}
                                {{result['form'].price.data}}

                                {{result['form'].call_put_flag.label}}
                                {{dict(result['form'].call_put_flag.choices).get(result['form'].call_put_flag.data)}}

                                {% if result['form'].risk_dividend.data == '0' %}
                                {{result['form'].risk_free.label}} \((\%) \)
                                {{result['form'].risk_free.data}}
                                {{result['form'].div_yield.label}} \((\%) \)
                                {{result['form'].div_yield.data}}
                                {%endif%}

                            </div>
                        </div>

                    </fieldset>
                </div>

                <div class="col-12">
                    <fieldset class="shadow-sm p-3 bg-white rounded animated fadeInLeft custom-overlay">
                        <div class="row border-bottom mb-2 pb-1">
                            <legend>Results</legend>
                        </div>
                        <!--\((\%) \) is a Mathjax symbol for % -->
                        {% if result[' plot_implied_volatility'] != None %}
                        <div class="row d-flex flex-column">
                            <span class="mb-1"> \(a_{0}\): {{result ['a0']}}</span>
                            <span class="mb-1"> \(a_{1}\): {{result ['a1']}}</span>
                            <span class="mb-1"> \(a_{2}\): {{result ['a2']}}</span>
                            <span class="mb-1"> \(R^{2}\): {{result ['r2']}}</span>
                            <br>

                            {% if result['form'].risk_dividend.data == '1' %}
                            <span class="mb-1 font-weight-bold"> Interest Rate \((\%) \): {{result['risk_free']}}</span>
                            <span class="mb-1 font-weight-bold"> Dividend Yield \((\%) \): {{result['div_yield']}}</span>
                            {% endif %}


                            <span class="mb-1"> File Name: {{result['file_name']}}</span>
                        </div>
                    </fieldset>
                </div>
            </div>
        </div>

        <div class="col-md-9 col-12">
            <div class="row">
                <div class="col">
                    <fieldset class="shadow-sm p-3 bg-white rounded animated fadeInLeft custom-overlay">
                        <div class="row border-bottom mb-2 pb-1">
                            <legend> Table of moments</legend>
                        </div>
                        <table class="table">
                            <thead class="thead-light">
                            <th scope="col"> Description</th>
                            <th scope="col"> Ceq</th>
                            <th scope="col"> LogNormal</th>
                            <th scope="col"> Ceq Return</th>
                            <th scope="col"> Normal</th>
                            </thead>
                            <tbody>
                            <tr>
                                <td> Area</td>
                                <td> {{result['area_prices']}}</td>
                                <td> 1</td>
                                <td> {{result['area_returns']}}</td>
                                <td> 1</td>
                            </tr>
                            <tr>
                                <td> Mean</td>
                                <td> {{result['expected_price']}}</td>
                                <td> {{result['expected_price']}}</td>
                                <td> {{result['m1_returns']}}</td>
                                <td> {{result['m1_returns']}}</td>
                            </tr>
                            <tr>
                                <td> Variance</td>
                                <td> {{result['sigma2_price']}}</td>
                                <td> {{result['sigma2_price']}}</td>
                                <td> {{result['m2_returns']}}</td>
                                <td> {{result['m2_returns']}}</td>
                            </tr>
                            <tr>
                                <td> Skewness</td>
                                <td> {{result['skewness_prices']}}</td>
                                <td> {{result['skewness_prices_log_n']}}</td>
                                <td> {{result['skewness_log_returns']}}</td>
                                <td> {{result['skewness_normal']}}</td>
                            </tr>
                            <tr>
                                <td> Kurtosis</td>
                                <td> {{result['kurtosis_prices']}}</td>
                                <td> {{result['kurtosis_prices_log_n']}}</td>
                                <td> {{result['kurtosis_log_returns']}}</td>
                                <td> {{result['kurtosis_normal']}}</td>
                            </tr>
                            </tbody>
                        </table>
                    </fieldset>
                </div>
            </div>

            <div class="col">
                <fieldset class="shadow-sm p-3 bg-white rounded animated fadeInLeft custom-overlay">
                    <div class="row border-bottom mb-2 pb-1">
                        <legend> Kolmogorov Smirnov Test</legend>
                    </div>
                    <table class="table">
                        <thead class="thead-light">
                        <th scope="col"></th>
                        <th scope="col"> Cdf Prices</th>
                        <th scope="col"> Cdf Returns</th>
                        </thead>

                        <tbody>
                        <tr>
                            <td> Statistic Value</td>
                            <td> {{result['statistic_prices']}}</td>
                            <td> {{result['statistic_returns']}}</td>

                        </tr>
                        <tr>
                            <td> PValue</td>
                            <td> {{result['pvalue_prices']}}</td>
                            <td> {{result['pvalue_returns']}}</td>

                        </tr>
                        </tbody>
                    </table>
                </fieldset>
            </div>
        </div>

        <div class="col-12 plot">
            <div id="plot_implied_volatility" class="shadow-sm  mb-3 bg-white rounded d-flex justify-content-center">
                {{ result['plot_implied_volatility'][0]|safe}}
                {{ result['plot_implied_volatility'][1]|safe}}
            </div>

<<<<<<< HEAD
            <div id="plot_return_distribution" class="shadow-sm mb-3 bg-white rounded d-flex justify-content-center">
=======
            <div id="plot_return_distribution"
                 class="shadow-sm p-3 mb-3 bg-white rounded d-flex justify-content-center">
>>>>>>> 9546e771194945becc494c59d6ce66ddb1974ee3
                {{ result['plot_return_distribution'][0]|safe}}
                {{ result['plot_return_distribution'][1]|safe}}
            </div>

            {% if result[' plot_index_distribution'] != None %}
            <div id="plot_index_distribution" class="shadow-sm  mb-3 bg-white rounded d-flex justify-content-center">
                {{ result['plot_index_distribution'][0]|safe }}
                {{ result['plot_index_distribution'][1]|safe }}
            </div>
            {% endif %}

            {% if result[' plot_index_cdf'] != None %}
            <div id="plot_index_cdf" class="shadow-sm  mb-3 bg-white rounded d-flex justify-content-center">
                {{ result['plot_index_cdf'][0]|safe}}
                {{ result['plot_index_cdf'][1]|safe}}
            </div>
            {% endif %}

            {% if result[' plot_return_cdf'] != None %}
            <div id="plot_return_cdf" class="shadow-sm mb-3 bg-white rounded d-flex justify-content-center">
                {{ result['plot_return_cdf'][0]|safe}}
                {{ result['plot_return_cdf'][1]|safe}}
            </div>
            {% endif %}

            {% endif %}
        </div>

        <div class="col-12">
            <form style="text-align:center;" method="POST" action="/shimko_market/old/delete/{{ result.id }}">
                <input type="submit" value="Delete"
                       title="Delete this post from database">
            </form>
        </div>

    </div>


</div>

{% endfor %}
<hr>
<center>
    <form method="POST" action="/shimko_market/old/delete/-1">
        <input type="submit" value="Delete all">
    </form>
</center>
{% else %}
<h3 class="text-center animated fadeInDown"> No previous simulations </h3>
{% endif %}

{% include 'footer.html' %}

</body>
</html>